namespace SpriteKind {
    export const Spawn = SpriteKind.create()
    export const Yellow = SpriteKind.create()
    export const Red = SpriteKind.create()
    export const BugNet = SpriteKind.create()
    export const Player2 = SpriteKind.create()
}
function spawnHive (mySprite: Sprite) {
    RandSpawn = randint(-1, 5)
    Bee = sprites.create(img`
        . . f f f . . 
        1 1 5 5 5 5 1 
        1 1 f f f 1 1 
        . 1 5 5 5 1 . 
        . f f f f f . 
        . . 5 5 5 . . 
        . f . . . f . 
        `, SpriteKind.Yellow)
    Bee.z = 6
    Bee.setPosition(mySprite.x - 10 + RandSpawn * 5, mySprite.y + randint(-15, 5))
    Bee.setVelocity(0, BeeSpeed + randint(-5, 5))
    if (randint(1, 10) <= RedChance) {
        EneBee = sprites.create(img`
            . . f f f . . 
            1 1 2 2 2 1 1 
            1 1 f f f 1 1 
            1 2 2 2 2 2 1 
            . f f f f f . 
            . . 2 2 2 . . 
            . f . . . f . 
            `, SpriteKind.Red)
        EneBee.setVelocity(0, BeeSpeed + randint(-5, 5))
        EneBee.setPosition(mySprite.x - 10 + RandSpawn * 5, mySprite.y + randint(-15, 5))
        EneBee.z = 6
    }
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (info.player1.hasLife() && game.runtime() > Net1Swing + 600) {
        Net1Swing = game.runtime()
        animation.runImageAnimation(
        Net,
        [img`
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..........................cc..
            .........................cc1b.
            ........................cc1.bb
            .......................cc1.b1b
            ......................cc1.b1.b
            ......................c1.b1.1b
            .......................cb1.1.b
            ........................b.1.1b
            .........................bb1.b
            ...........................bb.
            `,img`
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ........................ccc...
            .......................cc1c...
            ......................cc1.bb..
            .....................cc1.b1.b.
            ....................cc1.b1.1b.
            ....................c1.b1.1.b.
            .....................cb1.1.1b.
            .....................cb.1.1.b.
            ....................cbb1.1.1b.
            ...................cb..b1.1b..
            ..................cb....bbb...
            .................cb...........
            ..............................
            `,img`
            ..............................
            ..............................
            ...............cccc...........
            ...............b.1.bb.........
            ...............b1.1.1b........
            ...............b.1.1.1b.......
            ...............b1.1.1.1b......
            ...............b1.1.1.1b......
            ...............b.1.1.1b.......
            ...............b1.1.1.b.......
            ...............b.1bbbb........
            ...............cbb............
            ...............cb.............
            ...............cb.............
            ...............cb.............
            ...............cb.............
            ...............cb.............
            ..............................
            `,img`
            ..............................
            ..............................
            ..............................
            ..............................
            .........bbb..................
            ........b.1.b.................
            .......b.1.1.b................
            .......cb.1.1.b...............
            .......c.b.1.1b...............
            .......c1.b.1.b...............
            ........c1.b.1b...............
            .........c1.bb................
            ..........ccb.................
            ............cb................
            .............cb...............
            ..............cb..............
            ...............cb.............
            ..............................
            `,img`
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            .....bbb......................
            ....b.1.b.....................
            ....b1.1.b....................
            .....c1.1.b...................
            ......c1.1b...................
            .......c1.b...................
            ........cb....................
            `,img`
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            `],
        100,
        false
        )
    }
})
controller.player2.onButtonEvent(ControllerButton.A, ControllerButtonEvent.Pressed, function () {
    if (info.player2.hasLife() && game.runtime() > Net2Swing + 600) {
        Net2Swing = game.runtime()
        animation.runImageAnimation(
        Net2,
        [img`
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..........................88..
            .........................8816.
            ........................881.66
            .......................881.616
            ......................881.61.6
            ......................81.61.16
            .......................861.1.6
            ........................6.1.16
            .........................661.6
            ...........................66.
            `,img`
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ........................888...
            .......................8818...
            ......................881.66..
            .....................881.61.6.
            ....................881.61.16.
            ....................81.61.1.6.
            .....................861.1.16.
            .....................86.1.1.6.
            ....................8661.1.16.
            ...................86..61.16..
            ..................86....666...
            .................86...........
            ..............................
            `,img`
            ..............................
            ..............................
            ...............8888...........
            ...............6.1.66.........
            ...............61.1.16........
            ...............6.1.1.16.......
            ...............61.1.1.16......
            ...............61.1.1.16......
            ...............6.1.1.16.......
            ...............61.1.1.6.......
            ...............6.16666........
            ...............866............
            ...............86.............
            ...............86.............
            ...............86.............
            ...............86.............
            ...............86.............
            ..............................
            `,img`
            ..............................
            ..............................
            ..............................
            ..............................
            .........666..................
            ........6.1.6.................
            .......6.1.1.6................
            .......86.1.1.6...............
            .......8.6.1.16...............
            .......81.6.1.6...............
            ........81.6.16...............
            .........81.66................
            ..........886.................
            ............86................
            .............86...............
            ..............86..............
            ...............86.............
            ..............................
            `,img`
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            .....666......................
            ....6.1.6.....................
            ....61.1.6....................
            .....81.1.6...................
            ......81.16...................
            .......81.6...................
            ........86....................
            `,img`
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            ..............................
            `],
        100,
        false
        )
    }
})
scene.onHitWall(SpriteKind.Red, function (sprite, location) {
    sprite.destroy()
})
function Start () {
    scene.centerCameraAt(96, 0)
    scene.setBackgroundColor(7)
    tiles.setTilemap(tiles.createTilemap(hex`0c000900000000000000000000000000000000000300000000000000000002000000010000000300000000000000000000000000000000000000000000020000000000000000030000000000000000010000000000000000000000000000000000000000000003000000020000000000`, img`
        2 2 2 2 2 2 2 2 2 2 2 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 2 2 2 2 2 2 2 2 2 2 2 
        `, [myTiles.transparency16,myTiles.tile1,myTiles.tile2,myTiles.tile3], TileScale.Sixteen))
    blockMenu.setControlsEnabled(true)
    blockMenu.setColors(15, 4)
    blockMenu.showMenu(["Single-Player", "Two-Player Co-op", "Two-Player Versus"], MenuStyle.List, MenuLocation.BottomHalf)
    refreshspeed = 500
}
info.onCountdownEnd(function () {
    pause(200)
    Pause = true
    RoundReset()
    if (SinglePlayer == true) {
        if (info.player1.score() < Threshold) {
            pause(1000)
            game.showLongText("You need Bees... You didn't get enough Bees...", DialogLayout.Bottom)
            game.over(false)
        } else {
            Round += 1
            Threshold = Round * 25
            CurrentRound = info.player1.score() - LastRound
            LastRound = info.player1.score()
            game.showLongText("You caught " + CurrentRound + " bees!", DialogLayout.Bottom)
            if (Threshold - info.player1.score() < 1) {
                game.showLongText("Catch as many bees as you can!", DialogLayout.Bottom)
            } else {
                game.showLongText("Catch at least " + (Threshold - info.player1.score()) + " bees!", DialogLayout.Bottom)
            }
            PrepNewRound()
        }
    } else if (Coop == true) {
        CombinedScore = info.player1.score() + info.player2.score()
        if (CombinedScore < Threshold) {
            pause(1000)
            game.showLongText("You need Bees... You didn't get enough Bees...", DialogLayout.Bottom)
            if (CombinedScore > CoopHighScore) {
                game.showLongText("New Co-Op High Score! " + CombinedScore + "", DialogLayout.Bottom)
                CoopHighScore = CombinedScore
                reset()
            } else {
                game.showLongText("Score: " + CombinedScore, DialogLayout.Bottom)
                game.showLongText("Co-Op High Score: " + CoopHighScore, DialogLayout.Bottom)
                reset()
            }
        } else {
            Round += 1
            Threshold = Round * 35
            CurrentRound = CombinedScore - LastRound
            LastRound = CombinedScore
            game.showLongText("You caught " + CurrentRound + " bees!", DialogLayout.Bottom)
            if (Threshold - CombinedScore < 1) {
                game.showLongText("Catch as many bees as you can!", DialogLayout.Bottom)
            } else {
                game.showLongText("Catch at least " + (Threshold - CombinedScore) + " bees!", DialogLayout.Bottom)
            }
            PrepNewRound()
        }
    } else if (VersusMode == true) {
        pause(1000)
        P1CurrentRound = info.player1.score() - P1LastRound
        P2CurrentRound = info.player2.score() - P2LastRound
        if (P1CurrentRound > P2CurrentRound) {
            game.showLongText("Player 1 Wins Round: " + Round, DialogLayout.Bottom)
            game.showLongText("Player 1:" + P1CurrentRound, DialogLayout.Bottom)
            game.showLongText("Player 2:" + P2CurrentRound, DialogLayout.Bottom)
        } else if (P2CurrentRound > P1CurrentRound) {
            game.showLongText("Player 2 Wins Round: " + Round, DialogLayout.Bottom)
            game.showLongText("Player 2:" + P2CurrentRound, DialogLayout.Bottom)
            game.showLongText("Player 1:" + P1CurrentRound, DialogLayout.Bottom)
        } else {
            game.showLongText("Round: " + Round + " is a tie!", DialogLayout.Bottom)
        }
        P1LastRound = info.player1.score()
        P2LastRound = info.player2.score()
        Round += 1
        PrepNewRound()
    }
})
function initPlayer2 () {
    info.player2.setLife(3)
    info.player2.setScore(0)
    Hero2 = sprites.create(img`
        . . . 8 8 8 8 . . . 
        . 8 8 6 6 6 6 8 8 . 
        8 6 6 1 1 1 1 6 8 8 
        8 1 1 6 1 1 1 1 6 8 
        8 6 1 1 1 1 1 6 1 8 
        8 6 1 1 6 1 1 1 6 8 
        8 6 6 6 6 6 6 6 6 8 
        6 8 8 8 8 8 8 8 8 6 
        . 6 8 8 8 8 8 8 6 . 
        . . . 6 8 8 6 . . . 
        . . 8 8 8 8 8 8 8 . 
        8 8 6 6 6 6 6 6 8 8 
        8 6 6 1 1 1 1 6 6 8 
        1 1 6 1 1 1 1 6 1 1 
        . . 1 1 6 6 1 1 . . 
        . . 8 8 . . 8 8 . . 
        `, SpriteKind.Player)
    Hero2.setPosition(100, 100)
    Hero2.z = 5
    controller.player2.moveSprite(Hero2, 100, 0)
    Net2 = sprites.create(img`
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        `, SpriteKind.BugNet)
    Net2.z = 4
    Net2Swing = game.runtime()
}
sprites.onOverlap(SpriteKind.BugNet, SpriteKind.Yellow, function (sprite, otherSprite) {
    otherSprite.destroy()
    if (sprite == Net) {
        info.player1.changeScoreBy(1)
    } else if (sprite == Net2) {
        info.player2.changeScoreBy(1)
    }
})
function initPlayer1 () {
    info.player1.setLife(3)
    info.player1.setScore(0)
    Hero = sprites.create(img`
        . . . c c c c . . . 
        . c c b b b b c c . 
        c b b 1 1 1 1 b c c 
        c 1 1 b 1 1 1 1 b c 
        c b 1 1 1 1 1 b 1 c 
        c b 1 1 b 1 1 1 b c 
        c b b b b b b b b c 
        b c b b b b b b c b 
        . b c c c c c c b . 
        . . b b c c b b . . 
        . c c b b b b c c . 
        c c b b b b b b c c 
        c b b 1 1 1 1 b b c 
        1 1 b 1 1 1 1 b 1 1 
        . . 1 1 b b 1 1 . . 
        . . c c . . c c . . 
        `, SpriteKind.Player)
    Hero.setPosition(80, 100)
    Hero.z = 5
    controller.moveSprite(Hero, 100, 0)
    Net = sprites.create(img`
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        `, SpriteKind.BugNet)
    Net.z = 4
    Net1Swing = game.runtime()
}
function Start2 () {
    scene.centerCameraAt(96, 0)
    scene.setBackgroundColor(7)
    tiles.setTilemap(tiles.createTilemap(hex`0c000900000000000000000000000000000000000300000000000000000002000000010000000300000000000000000000000000000000000000000000020000000000000000030000000000000000010000000000000000000000000000000000000000000003000000020000000000`, img`
        2 2 2 2 2 2 2 2 2 2 2 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 . . . . . . . . . . 2 
        2 2 2 2 2 2 2 2 2 2 2 2 
        `, [myTiles.transparency16,myTiles.tile1,myTiles.tile2,myTiles.tile3], TileScale.Sixteen))
    blockMenu.setControlsEnabled(true)
    blockMenu.setColors(15, 4)
    blockMenu.showMenu(["Music", "Mute"], MenuStyle.List, MenuLocation.BottomHalf)
    refreshspeed = 500
}
function Setup () {
    Pause = true
    BeeSpeed = 25
    RedChance = 0
    P1CurrentRound = 0
    P1LastRound = 0
    P1CurrentRound = 0
    P2LastRound = 0
    CurrentRound = 0
    LastRound = 0
    Round = 1
    BeefreshSpeed = 500
    initPlayer1()
    if (blockMenu.selectedMenuOption() == "Single-Player") {
        Players = 1
        SinglePlayer = true
        info.player1.setScore(0)
        Threshold = Round * 25
        CombinedScore = info.player1.score()
        game.showLongText("Catch at least " + Threshold + " bees!", DialogLayout.Bottom)
    } else if (blockMenu.selectedMenuOption() == "Two-Player Co-op") {
        Players = 2
        Coop = true
        info.player1.setScore(0)
        info.player2.setScore(0)
        initPlayer2()
        Threshold = Round * 35
        CombinedScore = info.player1.score() + info.player2.score()
        if (CombinedScore > CoopHighScore) {
            CoopHighScore = CombinedScore
        }
        game.showLongText("Catch at least " + Threshold + " bees!", DialogLayout.Bottom)
    } else if (blockMenu.selectedMenuOption() == "Two-Player Versus") {
        info.player1.setScore(0)
        info.player2.setScore(0)
        VersusMode = true
        Players = 2
        initPlayer2()
        game.showLongText("Compete to catch the most bees!", DialogLayout.Bottom)
    }
    game.showLongText("Round: " + Round, DialogLayout.Bottom)
    game.showLongText("Press A to start round.", DialogLayout.Bottom)
    Hive = sprites.create(img`
        77777777777777777777777777777777
        77777777776667777777776677777776
        6677777766fff667776666ff6777776f
        ff666666ffeeeff666ffffeef67776f.
        .fffffffeeeeeeefffeeeeeeef676f..
        .......ffeeeeeeeeeeeeeeeecf6f...
        ........fbeeeeefffceeeeeecff....
        ........fbeeeef555fceeeeecf.....
        ........fbeeeef444fceeeeecf.....
        ........fbeeef55555fceeeecf.....
        .........fbeef44444fceeeecf.....
        .........fbef55ff555fceeecf.....
        .........fbef44ff444fceeecf.....
        ........fbeeeff444ffceeecf......
        ........fbeeeeefffceeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeeecf.....
        .......fbeeeeeeeeeeeeeeeecf.....
        ......fbeeeeeeeeeeeeeeeeeecf....
        .....fbeeeeeeeeeeeeeeeeeeecf....
        ....fbeeeeeeeeeeeeeeeeeeeeecf...
        `, SpriteKind.Spawn)
    Hive2 = sprites.create(img`
        77777777777777777777777777777777
        77777777776667777777776677777776
        6677777766fff667776666ff6777776f
        ff666666ffeeeff666ffffeef67776f.
        .fffffffeeeeeeefffeeeeeeef676f..
        .......ffeeeeeeeeeeeeeeeecf6f...
        ........fbeeeeefffceeeeeecff....
        ........fbeeeef555fceeeeecf.....
        ........fbeeeef444fceeeeecf.....
        ........fbeeef55555fceeeecf.....
        .........fbeef44444fceeeecf.....
        .........fbef55ff555fceeecf.....
        .........fbef44ff444fceeecf.....
        ........fbeeeff444ffceeecf......
        ........fbeeeeefffceeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeeecf.....
        .......fbeeeeeeeeeeeeeeeecf.....
        ......fbeeeeeeeeeeeeeeeeeecf....
        .....fbeeeeeeeeeeeeeeeeeeecf....
        ....fbeeeeeeeeeeeeeeeeeeeeecf...
        `, SpriteKind.Spawn)
    Hive3 = sprites.create(img`
        77777777777777777777777777777777
        77777777776667777777776677777776
        6677777766fff667776666ff6777776f
        ff666666ffeeeff666ffffeef67776f.
        .fffffffeeeeeeefffeeeeeeef676f..
        .......ffeeeeeeeeeeeeeeeecf6f...
        ........fbeeeeefffceeeeeecff....
        ........fbeeeef555fceeeeecf.....
        ........fbeeeef444fceeeeecf.....
        ........fbeeef55555fceeeecf.....
        .........fbeef44444fceeeecf.....
        .........fbef55ff555fceeecf.....
        .........fbef44ff444fceeecf.....
        ........fbeeeff444ffceeecf......
        ........fbeeeeefffceeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeecf......
        ........fbeeeeeeeeeeeeeeecf.....
        .......fbeeeeeeeeeeeeeeeecf.....
        ......fbeeeeeeeeeeeeeeeeeecf....
        .....fbeeeeeeeeeeeeeeeeeeecf....
        ....fbeeeeeeeeeeeeeeeeeeeeecf...
        `, SpriteKind.Spawn)
    Hive.setPosition(95, 12)
    Hive2.setPosition(48, 12)
    Hive3.setPosition(144, 12)
    Pause = false
    blockMenu.setControlsEnabled(false)
    info.startCountdown(15)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Red, function (sprite, otherSprite) {
    otherSprite.destroy()
    if (Players == 2) {
        if (sprite == Hero) {
            info.player1.changeLifeBy(-1)
        } else if (sprite == Hero2) {
            info.player2.changeLifeBy(-1)
        }
        if (info.player1.life() == 0) {
            Hero.destroy()
        }
        if (info.player2.life() == 0) {
            Hero2.destroy()
        }
        if (info.player1.life() == 0 && info.player2.life() == 0) {
            Pause = true
            pause(1000)
            if (Coop == true) {
                game.showLongText("You died... What an (anaphylactic) shock!", DialogLayout.Bottom)
                if (CombinedScore > CoopHighScore) {
                    game.showLongText("New Co-Op High Score! " + CombinedScore + "", DialogLayout.Bottom)
                    CoopHighScore = CombinedScore
                    reset()
                } else {
                    game.showLongText("Score: " + CombinedScore, DialogLayout.Bottom)
                    game.showLongText("Co-Op High Score: " + CoopHighScore, DialogLayout.Bottom)
                    reset()
                }
            } else {
                if (info.player1.score() > info.player2.score()) {
                    game.showLongText("Player 1 Wins!", DialogLayout.Bottom)
                } else if (info.player2.score() > info.player1.score()) {
                    game.showLongText("Player 2 Wins!", DialogLayout.Bottom)
                } else {
                    game.showLongText("Nobody Wins! Everybody Loses!", DialogLayout.Bottom)
                }
                reset()
            }
        }
    } else {
        info.player1.changeLifeBy(-1)
        if (info.player1.life() <= 0) {
            game.over(false)
        }
    }
})
function RoundReset () {
    for (let value of sprites.allOfKind(SpriteKind.BugNet)) {
        value.destroy()
    }
    for (let value2 of sprites.allOfKind(SpriteKind.Yellow)) {
        value2.destroy()
    }
    for (let value22 of sprites.allOfKind(SpriteKind.Red)) {
        value22.destroy()
    }
}
function PrepNewRound () {
    Net = sprites.create(img`
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        .........................
        `, SpriteKind.BugNet)
    if (Players == 2) {
        Net2 = sprites.create(img`
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            .........................
            `, SpriteKind.BugNet)
    }
    BeeSpeed += 10
    if (Round == 2 || (Round == 4 || (Round == 6 || Round == 8))) {
        RedChance += 1
    } else {
        if (refreshspeed >= 150) {
            refreshspeed += -50
        }
    }
    game.showLongText("Round: " + Round, DialogLayout.Bottom)
    Pause = false
    info.startCountdown(15)
}
scene.onHitWall(SpriteKind.Yellow, function (sprite, location) {
    sprite.destroy()
})
function reset () {
    for (let value3 of sprites.allOfKind(SpriteKind.Spawn)) {
        value3.destroy()
    }
    RoundReset()
    Hero.destroy()
    Hero2.destroy()
    info.player1.setScore(0)
    info.player2.setScore(0)
    info.player1.setLife(0)
    info.player2.setLife(0)
    refreshspeed = 500
    CombinedScore = 0
    SinglePlayer = false
    Coop = false
    VersusMode = false
    info.stopCountdown()
    Start()
}
blockMenu.onMenuOptionSelected(function (option, index) {
    if (blockMenu.selectedMenuOption() == "Music") {
        Mute = false
        music.setVolume(40)
        Start()
    } else if (blockMenu.selectedMenuOption() == "Mute") {
        Mute = true
        Start()
    } else {
        blockMenu.closeMenu()
        Setup()
    }
})
let Hive3: Sprite = null
let Hive2: Sprite = null
let Hive: Sprite = null
let Players = 0
let BeefreshSpeed = 0
let Hero: Sprite = null
let Hero2: Sprite = null
let P2LastRound = 0
let P2CurrentRound = 0
let P1LastRound = 0
let P1CurrentRound = 0
let CoopHighScore = 0
let CombinedScore = 0
let LastRound = 0
let CurrentRound = 0
let Round = 0
let Threshold = 0
let VersusMode = false
let Coop = false
let SinglePlayer = false
let Pause = false
let refreshspeed = 0
let Net2: Sprite = null
let Net2Swing = 0
let Net: Sprite = null
let Net1Swing = 0
let EneBee: Sprite = null
let RedChance = 0
let BeeSpeed = 0
let Bee: Sprite = null
let RandSpawn = 0
let Mute = false
Mute = true
game.setDialogFrame(img`
    e e e e e e e e e e e e e e e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e 4 4 4 4 4 4 4 4 4 4 4 4 4 e 
    e e e e e e e e e e e e e e e 
    `)
game.setDialogCursor(img`
    . . f f f . . 
    1 1 5 5 5 5 1 
    1 1 f f f 1 1 
    . 1 5 5 5 1 . 
    . f f f f f . 
    . . 5 5 5 . . 
    . f . . . f . 
    `)
game.showLongText("You need Bees! Use your Bug Net (A) to catch as many Honey Bees as you can in 15s. Avoid Killer Bees!", DialogLayout.Full)
Start2()
game.onUpdate(function () {
    if (blockMenu.isMenuOpen() == false) {
        if (Pause == false) {
            Net.x = Hero.x + 2
            Net.bottom = Hero.y - 3
            if (Players == 2) {
                Net2.x = Hero2.x + 2
                Net2.bottom = Hero2.y - 3
            }
        }
    }
})
forever(function () {
    if (!(Mute)) {
        music.playMelody(music.convertRTTTLToMelody("rimsky-kos:d=4,o=5,b=120:3p,110e,96e7,96p,96p,55e6,192d#7,77p,85d7,154p,77c#7,40p,192d7,28p,64c#7,192p,40c7,59p,256b6,37p,192c7,37p,85b6,70p,64a#6,33p,256a6,26p,192g#6,37p,192g6,35p,70f#6,77p,154f6,59p,128e4,128p,256e6,154p,48b4,38d#6,192d6,27p,256c#6,40p,64d6,38p,192c#6,35p,85c6,70p,192b,37p,256c6,35p,256b,27p,256a#,37p,70a,64p,256g#,27p,256g,32p.,32f#,384f,59p,51p,768g#4,154e3,64e,59p,768d#,27p,32d,256c#,37p,256d,35p,30c#,64p,43c,59p,51b4,256e,35p,768d#,37p,43d,192p,64c#,35p,384d,35p,85c#,59p,77c,37p,59b4,38p,256e,35p,70d#,64p,70d,59p,768c#,38p,192d,28p,64c#,40p,256c,38p,77b4,28p,256e,40p,77d#,154p,35d,384c#,19p,48d,85c#,59p,85c,55p,43b4,27p,128e,128p,256c,59e4,70d#,37p,768d,24p,768c#,27p,32c,256f,37p,38e,59p,256d#,33p,256e,154p,96p,96p,35c,154d#,40p,256d,26p,768c#,25p,768c,154p,128p,128p,30a4,768c#,26p,256d,28p,28d#,154p,85e,85p,85p,37c,192d#,38p,192d,27p,256c#,31p.,59c,43f,59p,43e,154p,192d#,37p,85e,55p,33p,33p,85c,768d#,37p,256d,27p,192c#,32p.,55c,55p,768c#,768f#3,85a4,31p.,32d,77d#,37p,256e,192p,110p,768c,51a3,85d#,37p,256d,35p,77c#,28p,96d,96p,768a4,55f3,77c#,38p,30c,154p,33b4,85c,85p,768c4,55p,96c#,35p,768d,35p,70d#,30p,192e,192p,96p,85e4,85p,85b4,154p,55f,77e,38p,192d#,40p,192e,192p,96p,96p,35a4,768d#,35p,256d,40p,85c#,40p,85d,85p,85p,256a4,35p,77c#,37p,256c,33p,96b4,37p,70c,70p,85c4,154p,43c#,64p,154d,40p,40d#,154p,96e,96p,96p,77e4,59p,40f#,59p,192g,37p,43g#,154p,256a,55p,45p,96e4,96p,77g#,28p,77g,35p,192f#,30p,256f,154p,768a3,768p,33f4,77a#,70p,77a,35p,256g#,27p,31a,154p,43g#,40g,77p,192f#,28p,192f,154p,110d4,110p,55b4,192f#,38p,256g,27p,768g#,26p,192a,154p,85p,96d,48f4,40g#,70p,256g,28p,192f#,31p.,48f,33a#,192a,26p,768g#,28p,154a,192p,85p,768a4,59f3,256g#,27p,192g,28p,256f#,27p,25p,25p,25p,35f,77f#,59p,192g,27p,256g#,43p,85a,85p,768d,768a4,40p,256g#,37p,77g,37p,256f#,37p,70g,154p,154d,256g4,128a#4,77f#,40p,768f,38p,40e,40p,30p.,30p.,30p.,256f,40p,43f#,59p,192g,40p,77g#,55p,85a,154p,55p,55p,45c#,192a#,40p,256a,28p,24g#,192a,154p,85p,85p,55a4,192g#,37p,192g,38p,256f#,27p,85g,85p,85p,35g4,192f#,40p,192f,30p,192e,26p,35p.,35p.,35p.,77f,38p,256f#,37p,256g,38p,77g#,70p,768a,768p,768p,192e4,40p,256a#,27p,40a,77p,256g#,37p,32p,32p,96a4,64a,28p,30a4,40p,33g#4,256a4,35p,192g#4,40p,768a4,33p,192g#4,40p,77a4,40p,768g#4,256a#4,37p,192a4,38p,32p,256a#4,28p,768a4,35a#,768g#4,192a#4,38p,32p,192a#,37p,31p,192a#4,28p,25p,43a#,40p,31p.,43a,35p,32a,384g#,38p,384a,35p,384g#,35p,384a,35p,55g#,70a,45p,768a#,28g#,192p,32a,154p,26p,35a#,768a#6,256a,31p,27p,192a#,43p,256a#6,85a,38p,26p,256a#,26p,35p.,77a#6,26p,45a,55p,55a#,32a,256g#,32p.,192a,59p,256a#,40p,64a,70p,40g#,38p,85a,85a4,154p,59a#,77p,256a,55p,45p,77a#4,154p,70g#,64p,768a,768p,45b4,154p,25a#,25p,25p,256a,35p,256g#,28p,26p,26p,59a,64p,31p,77a4,40p,768b,256c#,27p,25p,192c6,40p,768c#6,85c#,38p,26p,77c6,37p,25p,192b,38p,768a#,256a4,26p,768a,768c#,25p,24p,256a#,26p,24p,256b,37p,32p,256c6,26p,35p.,256c#6,37p,32p,154c6,43p,768b,77c#,37p,25p,85a#,40p,27p,768a,256d,13p,256c#,35p,34d.,38p,384d,33p,77c#,38p,33d,33p,256d#,40p,192d,37p,31p,31p,192d#6,40p,256d,37p,96d#6,96p,192d#,34p.,30p.,35d#6,192p,30p,256d#,43p,192d#6,40p,33p,31d6,40p,33d6,192c#6,40p,192d6,40p,256c#6,43p,154d6,40p,192c#6,28p,31d6,192p,26p,33d#6,256d6,37p,768d#6,256c#6,28p,26p,32d#7,32p,256d#6,26p,24p,43d#7,192p,768d#6,192c#6,28p,25p,192d#7,32p.,28d6,85p,43d#6,154d6,40p,768c#6,38p,154d6,32p,30d#6,768d6,37p,33c#6,64d6,154p,85d,154p,24d#6,24p,24p,85d6,59p,70c#6,40p,768d6,768p,256e,28p,25d#6,768d6,768p,256f,27p,30c#6,30p,30p,256d6,59p,768d#6,128p,256d,26p,768e6,768f#,37p,768f6,85d,26p,30p.,256f#6,37p,256d,154p,26f6,768e6,768f#,26p,26p,768d#6,37p,768d6,85f#,35p,25p,256d#6,27p,25p,256e6,38p,33p,256f6,28p,26p,192f#6,35p,768d,154p,192f6,59p,256f#,154p,77e6,256p,59p,70d#6,28p,30p.,30p.,30p.,256d6,35a#4,85c#6,35p,256c6,27p,256b,27p,55a#,40d#7,59p,24p,256d7,40p,192c#7,27p,110d7,192d6,38p,77c#7,37p,43c7,77p,59b6,77p,768g6,768p,768p,256a#6,26p,55b6,40c7,59p,64c#7,40p,96d7,96p,768g6,256a#,27p,192c#7,37p,77c7,59p,192b6,40p,85c7,128p,51p,96c6,48d#6,192b6,37p,51a#6,256a6,26p,128a#6,768d6,768p,256a#,40p,70b6,77p,59c7,37p,256c#7,40p,96c7,768d6,768p,256a,35p,256c#7,38p,192d7,26p,70d#7,40p,26p,26p,26p,26p,256e7,27p,256d#7,38p,77d7,55p,85c#7,26p,256d7,33e6,33p,192c#7,40p,33p,77c7,38p,26p,192b6,40p,33p,192c7,28p,768b6,256f6,27p,25p,256a#6,38p,33p,768a6,35p,33p,256g#6,30p,768g6,192f6,40p,33p,256f#6,37p,256f6,28p,33e6,192f6,30p,256e6,35p,77d#6,43p,77e6,70e,256p,256f6,37p,45e6,256c,70p,192d#6,38p,37e6,154p,85a4,768f6,33p,59e6,192f4,77p,154d#6,43p,192e6,55p,256a4,77p,192f6,37p,768e6,55p,384c,59p,77d#6,33p.,28e,154p,37f,77e,37p,33d#,256e,59p,48p,96e4,77f,40p,26p,192c4,154p,256e,40p,59d#,40p,256a2,192p,110p,33e,59f,40p,24p,24p,70e,37p,256d#,192p,96a2,96a3,77e,192p,38f,35p,18p,18p,256e,37p,32d#,192p,27p,27p,37e,192d#,38p,32d,70c#,26p,256d,26p,70c#,35p,70c,154p,77b4,27p,35c,64b4,40p,32a#4,256a4,38p,28g#4,256p,24g4,768f#4,37p,256f4,27p,27e4,192p,32f4,384e4,35p,85d#4,37p,70e4,38p,256f4,30p,32e4,77d#4,38p,256e4,38p,256f4,38p,85e4,55p,77d#4,40p,59e4,40p,192f4,37p,256e4,26p,256d#4,37p,77e4,40p,192f4,40p,64e4,40p,154d#4,45p,768e7,768p,59e6,85p,70f4,37p,96e4,96p,256c7,59p,77d#4,40p,96e4,96p,256a6,59p,256f4,38p,96e4,96p,384f6,35p,384d#4,37p,110e4,110p,40a6,256p,192f4,40p,96e4,96p,70c7,37p,768d#4,38p,154e4,154p,154e7,38p,256f4,28p,192e4,35p,768d#4,25p,256e4,192p,192e8,192p,45e7,256f4,31p,256c8,256e4,64p,77c7,768d#4,38p,96e4,154a7,256p,192a6,59p,70f4,43p,768f7,256e4,26p,192d#4,38p,32p,59a7,59p,256f4,37p,128e4,59c8,192p,40d#4,37p,768e8,256e4,384p,26e7,192p,30f4,96p,256f#4,28p,33g4,33p,77g#4,55p,154f6,192a4,59p,256e6,59p,59a#4,192f6,128p,256b4,43p,192e6,128p,48c,128p,768f6,32c#,154p,26p,33e6,33p,384f6,35p,32p,256e6,31p,27p,256f6,40p,35p,192e6,37p,31p,85f6,35p,25p,192e6,37p,31p,768f6,40p,38p,154e6,27p,35p.,256f6,37p,32p,192e6,27p,24p,768f6,33p,32p,768e6,37p,768d#6,384f6,35p,256e6,38p,77f6,37p,256e6,37p,256d#6,35p,768e6,37p,77f6,26p,33e6,256d#6,28p,32e6,77f6,40p,35e6,256d#6,28p,48e6,70f6,37p,192e6,40p,70d#6,26p,19p,19p,19p,19p,19p,35a6,384d#6,59p,70d6,32p.,33c#6,192c6,40p,25f6,32e6,64d#6,40p,25p,192e6,192p,256a,256p,37c,35d#6,192d6,26p,256c#6,26p,768c6,768p,768p,256a6,128p,51f#4,45c#6,64p,192d6,27p,256d#6,37p,256e6,85a6,154p,55p,55p,55p,51a,43d#6,64p,70d6,38p,43c#6,59p,192c6,30p,33f6,43e6,154p,85d#6,38p,26p,768e6,192c,192p,96p,77a,64p,59d#6,77p,256d6,35p,45c#6,30p,768a6,768c6,192d,192p,96p,55a4,40c#6,64p,256d6,40p,59d#6,30p.,15p,15p,15p,32e6,256d#6,59p,70d6,40p,256c#6,27p,154d6,192p,85p,85p,35d,70c#6,26p,33c.6,256p,43b,43p,43p,55c,192c6,27p,85c#6,70p,77d6,27p,256d#6,59p,48p,768b4,768p,128g#4,192e6,43p,256f6,40p,192e6,32p,59d#6,40p,256e6,154p,96p,96p,32a4,192p,70d#6,192p,154d6,30p,154c#6,40p,70d6,154p,48p,48p,55a4,192c#6,28p,192c6,26p,384b,26p,192c6,154p,85p,85p,35a4,192c#6,26p,32d6,384d#6,38p,96e6,96p,96p,256e4,59p,64f#6,38p,59g6,64p,37g#6,59p,85a6,85p,768c#3,96p,55a3,31g#6,77g6,40p,256f#6,26p,768f4,768p,256a3,128p,27f6,70a#6,70p,40a6,192p,77g#6,40p,70a6,43p,24g#6,256g6,40p,43f#6,37p,768f6,96d7,96p,96p,128d,77f#6,26p,33g6,77g#6,30p.,16p,16p,16p,128d7,55f,32g#6,77g6,27p,256f#6,27p,154f6,28p,33a#6,64a6,77p,32g#.6,256p,768f,768d4,768a4,55p,43g#6,59p,768g6,31p.,192f#6,27p,24p,24p,256d7,192p,110p,55g4,256f#6,28p,192g6,43p,59g#6,43p,25p,768d7,768p,768p,192f,30p,256g#6,38p,77g6,40p,192f#6,40p,110g6,110p,110p,256g4,28p,70f#6,64p,70f6,37p,256e6,27p,25p,25p,768f6,96a3,55p,43f#6,64p,192g6,31p.,192g#6,28p,768a6,768p,768p,768p,256e4,27p,256a#6,35p,40a6,154p,70g#6,40p,192a6,192p,96p,96p,51d4,40g#6,59p,70g6,37p,77f#6,154p,51p,51p,96a4,45f6,40p,154f#6,37p,256g6,38p,192g#6,55p,96a4,96p,85e4,192p,40a6,192p,70b6,70p,128c7,31p,192d7,59p,45p,45p,45p,128b4,77e7,59p,192f7,38p,192e7,38p,192d#7,40p,256e7,192p,85e4,85p,154c,30d#7,154p,43d7,154p,33p,33p,96c6,256c#7,28p,31c.7,256p,192f7,40p,192e7,43p,77d#7,26p,19p,19p,19p,35e7,192d#7,37p,154d7,26p,77c#7,55p,32p,32p,192c7,256p,35a4,154c#7,38p,77d7,59p,77d#7,40p,192e7,128p,128c,128p,110e4,35d#7,77d7,192p,55p,55p,128c6,85p,70c#7,43p,154c7,45p,40f7,59p,256e7,37p,43d#7,38p,768e7,96c,96p,59e4,70d#7,64p,70d7,40p,256c#7,40p,154c7,154p,77p,77p,64a4,59c#7,27p,192d7,27p,154d#7,30p,25p,192e7,154p,96e4,30a.3,35g#6,37a6,38p,19p,28a#6,154p,30b6,256f,192p,32c7,70c#7,64p,768d7,256d,154p,96p,59a4,55c#7,192p,85c7,768b4,70p,192b6,27p,24p,192d,35p,77b6,37p,128a#6,77f,154p,32a6,768e4,192p,154p,192g#6,35p,128a6,192a,70p,70a#6,27p,37b6,128c7,40p,77c#7,59p,37d7,40p,192d#7,37p,256e7,192p,110p,110p,55g#,154f7,37p,64e7,77p,77d#7,33p,384e7,27p,154f7,40p,70e7,37p,192d#7,33p.,128e7,128p,85a,768a4,17c,33g#7,77a7,38p,256a6,64p,192a#7,64p,192b7,64p,110f6,70c8,59p,256c#8,37p,32p,32p,77d8,768f,38p,59c#8,77p,96b,192c8,37p,77b7,59p,77d6,192p,43c8,192p,45b7,45p,256a#7,59p,128e,77a7,64p,77c6,154p,51p,32g#7,77a7,64p,77a#7,85p,154b7,40p,70c8,64p,43c#8,192p,192d8,32p,55d#8,43p,768e8,96e,96p,256g#6,64p,192f8,25p,77e8,59p,256d#8,26p,768e8,26p,192f#8,25p,384g8,14p,14p,14p,14p,18a6,38p,28g8,192p,28f#8,192p,48g8,48p,48p,768a#,192c#,70p,43f#8,192p,256f8,27p,33e8,77f8,154p,51p,51p,51p,59a,38e8,384p,70d#8,35p,768d8,25p,256c#8,37p,77c8,70p,59b7,38p,384a#7,35p,96a7,96p,192a,154p,85p,59c,70g#7,59p,256g7,31p.,77f#7,40p,192g7,51p,154c#,154p,96e4,43f#7,59p,30f7,192p,256e7,55p,256a3,64p,768f7,192f4,70p,48d,192e7,40p,70d#7,59p,77d7,38p,85c#7,51p,45c7,64p,192b6,28p,154a#6,28p,24p,24p,192a6,192p,55a3,192a#6,37p,85a6,59p,77g#6,30p,32p.,25a6,25p,192a#6,40p,33p,192a6,30p,26p,192g#6,28p,25p,30a6,154p,192a,40p,33p,28a#6,192p,256b6,37a,37p,192c7,28p,25p,192c#7,35p,192d7,256p,70f,64p,768d#7,70a,31p,77e7,77p,77p,45c6,192p,192f7,37p,77e7,59p,64d#7,55p,154d#6,154e7,70p,85e6,768f7,38p,96d#6,192e7,37p,31p,192d#7,38p,768e7,70d#6,43p,77e6,59p,33p,59d#7,70p,96e7,77e6,128p,154c6,192f7,35p,110e6,77f#7,64p,35p,154g7,30p,25p,256g#7,31p.,19p,19p,96a7,37a,7p,32e6,77f6,70p,64f#6,59p,77g6,38p,192g#6,35p,77a6,40p,768a#6,26p,192b6,28p,154c7,37p,768c#7,40p,77d7,51p,85d#7,38p,192a4,192p,768e,96e7,55c6,70f7,43p,192f#7,43p,77g7,64p,70g#7,77p,110e,59a7,77p,70a#7,154p,55c6,192b7,40p,192a6,192p,192c8,40p,256c#8,64p,192e7,154p,256d8,35p,31p,768d#8,28p,27p,154e8,40p,32p,192f#8,30p,768g8,192c7,43p,70b6,43p,26p,26p,154c8,2p,2p,2p,2p,2p,96a6,96p,768e6,33c,2p,55a4,13a2"), 140)
        music.rest(music.beat(BeatFraction.Breve))
    }
})
game.onUpdateInterval(refreshspeed, function () {
    if (blockMenu.isMenuOpen() == false) {
        if (Pause == false) {
            spawnHive(Hive)
            spawnHive(Hive2)
            spawnHive(Hive3)
            if (Round >= 6) {
                spawnHive(Hive)
            }
        }
    }
})
